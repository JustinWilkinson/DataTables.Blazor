@inject DataTablesInterop Datatables

<CascadingValue Value="this">
    <table id="@Id" class="@Class" style="@Style">
        @if (!string.IsNullOrEmpty(SourceUrl))
        {
            @* If SourceUrl is provided, allow for the abbreviated syntax where all we need
            inside the DataTable component is a collection of Column components *@
            <thead>
                <tr>@ChildContent</tr>
            </thead>
        }
        else
        {
            @* We expect a full table structure inside the DataTable component *@
            @ChildContent
        }
    </table>
</CascadingValue>

@code{
    [Parameter]
    public RenderFragment ChildContent { get; set; }

    [Parameter]
    public string Id { get; set; }

    [Parameter]
    public string Class { get; set; }

    [Parameter]
    public string Style { get; set; }

    [Parameter]
    public string SourceUrl { get; set; }

    [Parameter]
    public DataTableOptions Options { get; set; }

    public List<Column> Columns { get; set; } = new List<Column>();

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await Datatables.InitialiseAsync(Id, DataTableOptions.FromComponent(this));
        }
    }
}